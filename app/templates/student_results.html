{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h2 style="margin-top:0;">Exam Result</h2>
    <div class="row">
      <div class="col">
        <div class="pill">Score: {{ "%.1f"|format(attempt.score or 0) }} / 100</div>
        <div class="pill" style="margin-left:8px;">Rating: {{ attempt.rating.value if attempt.rating else "-" }}</div>
      </div>
      <div class="col" style="text-align:right;">
        <div class="pill">Time: {{ attempt.elapsed_seconds or 0 }}s</div>
        <div class="pill" style="margin-left:8px;">Reason: {{ attempt.ended_reason.value if attempt.ended_reason else "-" }}</div>
      </div>
    </div>

    <div style="margin-top: 14px;" class="muted">
      Answered: {{ attempt.questions_answered }} • Max incorrect streak: {{ attempt.max_consecutive_incorrect }}
    </div>

    <div style="margin-top: 18px;">
      <form method="post" action="/student/exam/start" style="display:inline;">
        {% if attempts_left > 0 %}
          <button class="primary" type="submit">AGAIN (retake) — {{ attempts_left }} left</button>
        {% else %}
          <button type="button" disabled>AGAIN (no attempts left)</button>
        {% endif %}
      </form>
      <a href="/student" style="margin-left:10px;">Back to student page →</a>
    </div>
  </div>
{% endblock %}

